---
import Base from '../components/Base.astro';
import BlogPostCard from '../components/blog/blog-post-card.astro';
import uuid from 'react-uuid'
import { BlogPostsSearch } from '../components/blog/blog-posts-search';
import type { BlogPost, BlogPostFrontmatter } from '../types';

const posts = (await Astro.glob<BlogPostFrontmatter>('./blog/*.md')).slice(0, 5) as BlogPost[]
---

<Base>
  <input type="text" class="mb-8 block w-full rounded-lg border border-app-violet-base px-3 py-2 text-gray-300 placeholder:text-gray-400 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-red-400 dark:bg-app-violet-dark/95" placeholder="Pesquise sobre Typescript" />

  <div class="flex flex-col gap-y-4">
    {posts.map(post => (
      <BlogPostCard
        title={post.frontmatter.title}
        description={post.frontmatter.description}
        createdAt={post.frontmatter.pubDate}
        readTime={post.frontmatter.minutesRead}
        key={uuid()}
        href={post.url}
      />
    ))}

    <BlogPostsSearch posts={posts} client:load />
  </div>
</Base>
