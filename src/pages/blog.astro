---
import reactUuid from "react-uuid";

import Base from "../components/Base.astro";
import { BlogCard } from "../components/BlogCard";
import { isPostRecent } from "../utils/isPostRecent";

const posts = (await Astro.glob("./blog/*.{md, mdx}")).sort(
  (a, b) =>
    new Date(b.frontmatter.pubDate).valueOf() -
    new Date(a.frontmatter.pubDate).valueOf()
);
---

<Base>
  <div
    class="flex flex-col justify-center items-center gap-8 py-10 px-5 md:flex-row md:flex-wrap md:gap-8 md:justify-around xl:max-w-screen-xl lg:mx-auto"
  >
    {
      posts.map((post) => (
        <BlogCard
          key={reactUuid()}
          href={post.url}
          title={post.frontmatter.title}
          description={post.frontmatter.description}
          createdAt={post.frontmatter.pubDate}
          tags={post.frontmatter.tags}
          isNew={isPostRecent(post.frontmatter.pubDate)}
          client:load
        />
      ))
    }
  </div>
</Base>
